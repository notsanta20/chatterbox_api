generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("LOCAL_DATABASE_URL")
}

model Users {
  id               String     @id @default(uuid())
  username         String
  salt             String
  hash             String
  senderMessages   Messages[] @relation("senderId")
  receiverMessages Messages[] @relation("receiverId")
  groups           Group[]
}

model Messages {
  id         String   @id @default(uuid())
  message    String?
  imageURL   String?
  sender     Users    @relation("senderId", fields: [senderId], references: [id])
  senderId   String
  receiver   Users?   @relation("receiverId", fields: [receiverId], references: [id])
  receiverId String?
  time       DateTime @default(now())
  group      Group?   @relation(fields: [groupId], references: [id])
  groupId    String?
}

model Group {
  id       String     @id @default(uuid())
  name     String
  users    Users[]
  Messages Messages[]
}
